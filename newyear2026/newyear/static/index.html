<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2026马年奇遇</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app" class="bg-layer bg-intro" data-sound="on">
      <button id="sound-toggle" class="ghost sound-toggle">🔊 声音已开启</button>
      <main class="stage">
        <section id="page-intro" class="page active">
          <div class="card">
            <h1 class="title">准备好迎接你的2026了吗？</h1>
            <div class="input-wrap">
              <input id="name-input" type="text" maxlength="12" placeholder="请在此刻，留下你的名字" />
              <span id="name-hint" class="hint"></span>
            </div>
            <button id="intro-btn" class="primary" disabled>准备进入你的新年之旅 🚀</button>
            <div class="footnote">输入名字，即可解锁专属好运通道</div>
          </div>
        </section>

        <section id="page-transition" class="page">
          <div class="overlay">
            <div class="type-block">
              <div id="auth-line" class="type-line"></div>
              <div id="welcome-line" class="type-line"></div>
            </div>
            <div id="transition-sub" class="subtitle">你的2026马年专属好运列车，即将发车。</div>
            <button id="transition-btn" class="primary hidden">解锁好运之旅 ✨</button>
            <div class="train-track">
              <div id="train" class="train">
                <div class="train-head">
                  <div class="train-light"></div>
                  <div class="train-front-window"></div>
                </div>
                <div class="train-body">
                  <div class="train-window-row">
                    <span class="train-window"></span>
                    <span class="train-window"></span>
                    <span class="train-window"></span>
                    <span class="train-window"></span>
                  </div>
                </div>
                <div class="train-wheels">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="page-draw" class="page">
          <div class="card wide">
            <h2 id="draw-title" class="title"></h2>
            <div class="subtitle">心诚则灵，点击签筒，获取马年的第一份指引。</div>
            <div class="jar-area">
              <div id="jar" class="jar">
                <div class="jar-glow"></div>
                <div class="jar-body"></div>
                <div class="jar-top"></div>
              </div>
              <button id="draw-btn" class="secondary">点击此处 摇一摇签筒</button>
            </div>
          </div>
          <div id="fortune-card" class="fortune hidden">
            <div class="fortune-inner">
              <div id="fortune-photo-wrap" class="fortune-photo-wrap">
                <img id="fortune-photo" class="fortune-photo" src="" alt="签文封面" />
                <button id="fortune-show-text" class="primary">查看签文</button>
              </div>
              <div id="fortune-text-wrap" class="fortune-text-wrap hidden">
                <div id="fortune-title" class="fortune-title"></div>
                <div id="fortune-poem" class="fortune-poem"></div>
                <div id="fortune-exp" class="fortune-exp"></div>
                <div class="fortune-actions">
                  <button id="save-card" class="ghost">保存签文卡</button>
                  <button id="fortune-redraw" class="ghost">再抽一次签 🔁</button>
                  <button id="open-bless" class="primary">开启祝福</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="page-bless" class="page">
          <canvas id="fireworks-canvas"></canvas>
          <div id="luck-decor" class="luck-decor hidden">
            <div class="luck-item">福</div>
            <div class="luck-item">🐎</div>
            <div class="luck-item">福</div>
            <div class="luck-item">🐎</div>
          </div>
          <div class="movie">
            <div class="movie-intro">
              <div id="movie-open-1" class="movie-line"></div>
              <div id="movie-open-2" class="movie-line"></div>
              <div id="movie-open-3" class="movie-line"></div>
            </div>
            <div id="movie-main" class="movie-main"></div>
            <div id="movie-voice" class="movie-voice"></div>
            <div class="movie-grid">
              <div class="grid-item">🐎 行动力：想到就做，绝不内耗</div>
              <div class="grid-item">💰 搞钱力：多劳多得，钱包鼓鼓</div>
              <div class="grid-item">🥂 松弛感：该吃吃该喝喝，遇事别往心里搁</div>
              <div class="grid-item">❤️ 被爱运：有人爱，有事做，有所期待</div>
            </div>
            <button id="to-share" class="primary">进入分享时刻</button>
            <button id="open-game" class="secondary">挑战迷你游戏 🎯</button>
          </div>
          <audio id="bless-bgm" src="bless-bgm.mp3" loop preload="auto"></audio>
        </section>

        <section id="page-game" class="page">
          <div id="game-menu" class="card">
            <h2 class="title">马年迷你游戏合集</h2>
            <div class="subtitle">选一个小游戏，解锁你的马年好运彩蛋。</div>
            <div class="game-list">
              <div class="game-card">
                <div class="game-card-title">马年点点点</div>
                <div class="game-card-desc">在限定时间内尽可能多地点中小金圈，测试你的手速。</div>
                <button id="enter-game-tap" class="primary">开始这局</button>
              </div>
              <div class="game-card">
                <div class="game-card-title">马年接元宝</div>
                <div class="game-card-desc">左右移动小马，接住元宝、福袋、烟花，躲开小鞭炮。</div>
                <button id="enter-game-catch" class="primary">接元宝开局</button>
              </div>
              <div class="game-card">
                <div class="game-card-title">福马翻牌消消乐</div>
                <div class="game-card-desc">记住牌面位置，翻到相同马年图案，全部配对就通关。</div>
                <button id="enter-game-memory" class="primary">开始翻牌</button>
              </div>
            </div>
            <div class="game-menu-actions">
              <button id="game-back-from-menu" class="ghost">返回祝福页</button>
            </div>
          </div>

          <div id="game-area-tap-catch" class="game-area hidden">
            <canvas id="game-canvas"></canvas>
            <div class="game-hud">
              <div class="game-info">
                <span id="game-timer"></span>
                <span id="game-score"></span>
                <span id="game-result"></span>
              </div>
              <div class="game-actions">
                <button id="game-start" class="primary">开始挑战</button>
                <button id="game-back" class="ghost">返回小游戏列表</button>
              </div>
            </div>
          </div>

          <div id="game-area-memory" class="game-area hidden">
            <div class="memory-hud">
              <div class="game-info">
                <span id="memory-timer"></span>
                <span id="memory-step"></span>
                <span id="memory-result"></span>
              </div>
            </div>
            <div id="memory-grid" class="memory-grid"></div>
            <div class="game-actions">
              <button id="memory-restart" class="primary">重新洗牌</button>
              <button id="memory-back" class="ghost">返回小游戏列表</button>
            </div>
          </div>

          <div id="game-result-overlay" class="game-result-overlay hidden">
            <div class="card">
              <h2 id="game-result-title" class="title"></h2>
              <div id="game-result-detail" class="subtitle"></div>
              <div class="share-actions">
                <button id="game-save-shot" class="ghost">保存战绩截图 📸</button>
                <button id="game-result-close" class="primary">返回小游戏列表</button>
              </div>
            </div>
          </div>
        </section>

        <section id="page-share" class="page">
          <div class="card">
            <h2 class="title">好运已送达，请查收！</h2>
            <div class="subtitle">
              把这份专属好运分享给朋友，或者保存下来，给自己一个新年的约定。
            </div>
            <div class="share-actions">
              <button id="copy-link" class="ghost">复制专属祝福链接 🔗</button>
              <button id="retry-draw" class="ghost">再抽一次签 🔁</button>
              <button id="back-home" class="primary">返回首页 🏠</button>
            </div>
            <div id="share-status" class="hint"></div>
            <div id="share-footer" class="footnote"></div>
          </div>
        </section>
      </main>
    </div>
    <script src="app.js"></script>
  </body>
</html>
